<!DOCTYPE html>
<html>

<head>
    <title>competition?</title>
    <link rel="shortcut icon" href="https://cdn-icons-png.flaticon.com/512/65/65654.png">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="../static/styles.css">
</head>

<body>
    <div class="flexbox">
        <div class="col">

            <div class="rect">
                <svg width="400" height="100%">
                    <rect width="160" height=rclicks style="fill:rgb(185, 0, 0); stroke-width:3;" x="30%"/>
                </svg>
            </div>
            <button class="buttonstyle" id="r">
                Team R
            </button>
            {% if rclicks %}
            <span class="spandex">{{ rclicks }}</span>
            {% else %}
            <span>Error no click val</span>
            {% endif %}
        </div>


        
        
        <div class="col">
            <div class="rect">
                <svg width="400" height="100%">
                    <rect width="160" height=gclicks style="fill:rgb(125, 226, 127); stroke-width:3;" x="30%"/>
                </svg>
            </div>
            <button class="buttonstyle" id="g">
                Team G
            </button>

            {% if gclicks %}
            <span class="spandex">{{ gclicks }}</span>
            {% else %}
            <span>Error no click val</span>
            {% endif %}

        </div>

        

        <div class="col">
            <div class="rect">
                <svg width="400" height="100%">
                    <rect width="160" height=bclicks style="fill:rgb(76, 151, 227); stroke-width:3;" x="30%"/>
                </svg>
            </div>
            <button class="buttonstyle" id="b">
                Team B
            </button>

            {%if bclicks %}
            <span class="spandex">{{ bclicks }}</span>
            {% else %}
            <span>Error no click val</span>
            {% endif %}
        </div>
    </div>
    <script>
        document.querySelectorAll(".buttonstyle").forEach(element => {
            element.addEventListener('click', async _ => {
                const id = element.id;
                console.log("clicked " + id)
                try {
                    const response = await fetch('/', {
                        method: 'post',
                        body: JSON.stringify({"id":id})
                    });
                    console.log('Completed!', response);
                } catch (err) {
                    console.error(`Error:`);
                }
            });
        });

        const rectIndex = 0;
        document.querySelectorAll(".rect").forEach(element => {
            const spanIndex = 0; 
            document.querySelectorAll(".spandex").forEach(spans => {
                if (rectIndex == spanIndex) {
                    element.setAttribute(height, spans.id);
                }
            })
        });
    </script>

</html>